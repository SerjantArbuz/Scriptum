package sgtmelon.scriptum.test.control.notification

import androidx.test.ext.junit.runners.AndroidJUnit4
import org.junit.Test
import org.junit.runner.RunWith
import sgtmelon.scriptum.test.ParentNotificationTest

/**
 * Test of notification open from status bar
 */
@RunWith(AndroidJUnit4::class)

class OpenTest : ParentNotificationTest() {

    @Test fun openTextNote() = data.insertText(data.textNote.copy(isStatus = true)).let {
        iBindControl.notifyNote(it, listOf())

        launch { onOpen { openTextNoteBind(it) { onPressBack() }.mainScreen() } }

        iBindControl.cancelNote(it.noteEntity.id.toInt())
    }

    @Test fun openRollNote() = data.insertRoll(data.rollNote.copy(isStatus = true)).let {
        iBindControl.notifyNote(it, listOf())

        launch { onOpen { openRollNoteBind(it) { onPressBack() }.mainScreen() } }

        iBindControl.cancelNote(it.noteEntity.id.toInt())
    }

    @Test fun openInfo() = data.insertNotification().let {
        iBindControl.notifyInfo(count = 1)

        launch { onOpen { openNotification { onPressBack() }.mainScreen() } }
    }

}